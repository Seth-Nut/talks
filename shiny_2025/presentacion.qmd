---
title: "From Data to Narrative"
subtitle: "Interactive Storytelling with Shiny"
author: 
  - Francisco Alfaro
date: 11 Apr 2025
format: 
  revealjs:
    transition: slide
    title-slide-attributes: 
      data-background-image: images/background.jpg
    logo: images/shinyv2.png
filters:
  - quarto-ext/shinylive
---

## About me {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="40%"}
![](images/fralfaro.png){fig-align="center"}
:::

::: {.column width="60%"}
<br>

-   Francisco Alfaro Medina aka *fralfaro*
-   Member of Python Chile
-   Lead Data Scientist at Grupo Security\
-   Associate Lecturer at UTFSM
:::
:::

::: notes
My name is Francisco Alfaro Medina, also known as *fralfaro*.  
I'm a member of Python Chile, currently working as Lead Data Scientist at Grupo Security, and I also teach at UTFSM.
:::

------------------------------------------------------------------------

## Agenda {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column .incremental width="30%"}
-   

-   No

-   Nope

-   No chance
:::

::: {.column .fragment width="70%"}
<img src="images/neg.png" alt="Tachado" style="width: 50%; height: auto;"/>
:::
:::

::: notes
Most talks start with a detailed agenda slide...  
But not this one.  
I want this to feel more like a story we explore together, not a checklist.
:::

------------------------------------------------------------------------

##  {background-image="images/background.jpg" background-opacity="0.25"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
::: callout-note
## Storytelling principle #1

Never reveal the ending too soon.\
[Always build up tension and drama]{.fragment}
:::
:::

::: {.notes}
Lesson #1 of Storytelling.
NEVER kill the suspense. 
Don't give up the reveal. 
No book or joke starts by revealing the ending, why would you? 
Only explain the content if it raises the stakes and makes it more interesting!
:::

------------------------------------------------------------------------

## Agenda (v2) {background-image="images/background.jpg" background-opacity="0.25"}

::: incremental
1.  Never reveal the [ending]{style="background-color:black;"}\
2.  Details are important, but [not **all** details are important.]{style="background-color:black;"}\
3.  Your first draft will be [horrible.]{style="background-color:black;"}\
4.  Explain less, [show more]{style="background-color:black;"}
:::

::: notes
This will actually *be* our agenda for today...  
But I'm not going to reveal what each point means until we reach it.  
It's part of the story ‚Äî you‚Äôll only connect the dots at the end.  

Also, each of these points reflects a lesson in storytelling and communication with data.  
So keep them in the back of your mind ‚Äî they‚Äôll make more sense as we go.
:::

------------------------------------------------------------------------

##  {background-image="images/background_slides3.png" background-opacity="0.3"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
[Storytelling]{style="font-size: 1em"}

[Why Storytelling?]{style="font-size: 1.5em"}
:::


::: {.notes}
OK, so, why data storytelling?
:::


------------------------------------------------------------------------

## What is Storytelling? {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="50%"}
![](images/cave.jpg){fig-align="center" width="90%"}
:::

::: {.column .fragment width="50%"}
![](images/fire.jpg){fig-align="center" width="100%"}
:::
:::

. . .

::: {style="text-align: center; "}
üî• **Stories** are the first human technology.
:::

:::{.notes}
People have been telling stories since the begining, because it's just the way our brains work. 
[click]
It's a "built-in technology" because it allows for knowledge transmission. 
It allows collective learning and cooperation at small and large scale.

Stories are not a random collection of facts. There's a very specific order: start, conflict, conflict resolution, ending. 
That's the pattern that the brain craves, because it can learn from it. That's why we consume so much stories in any form: books, comics, tv-series, movies, etcetera.
So, what do you do when you know how something works? You hack it, of course!
:::

------------------------------------------------------------------------

## Ohh, those hackable brains {background-image="images/background.jpg" background-opacity="0.25"}

<br>

::: columns
::: {.column width="50%"}
![](images/storytelling/sketplanation.png){fig-align="center" width="90%"}\
*Peak-End Rule*
:::

::: {.column .fragment width="50%"}
![](images/storytelling/got.jpg){fig-align="center" width="100%"}\
*Game of Thrones Rating, by Kelvin Neo*
:::
:::

:::{.notes}
The peak-end rule is a fun fact. You remember something for:
What was the most intense emotion
How it ended
You can use this to build your presentation around the big ending you want. 
If you are not convinced, let me give you a real example. 
[click]
We, collectively, enjoyed 7 seasons of this great tv series. Can you guess wich one it is?
[click]
Yes, the whole game of thrones series is remembered by the not-so-great ending and the peak scenes (do you remember the red wedding?)
What's really interesting is that is not symmetrical. We can forgive a bad first season, but never a bad grand finale. Endings matter!
:::

------------------------------------------------------------------------

## Narrative {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%"}
<br><br> Use **Storytelling tricks** (narrative) to create presentations that will be **remembered** and make an **impact**
:::

::: {.column .fragment width="40%"}
![](images/emotions.png){fig-align="center"}
:::
:::

. . .

::: {style="text-align: center;"}
üé≠ Emotions inspire action
:::


:::{.notes}
We are only as good as our communication skills. If you‚Äôre really really good, but cannot articulate your ideas and communicate effectively, you‚Äôll only be as good as someone bad but with great communication skills. 
Think of storytelling is a bag of tricks you can use to make better presentations.
Presentations that will change something on your audience.
[click]
Think of Sherlock Holmes. We enjoyed his stories, not because he was a genius, but  because of how Doctor John Watson describe the cases. It‚Äôs not enough to crack the case and solve the mystery. We need to be able to collect the important facts and to tell an engaging story. 
[click]
The key point is: Only emotions create actions.
:::


------------------------------------------------------------------------

## The best example {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column .fragment width="30%" fragment-index="1"}
![](images/storytelling/spotify1.png){fig-align="center"}
:::

::: {.column .center width="40%"}
<br><br> How to make millions of people share statistics on social media?
:::

::: {.column .fragment width="30%" fragment-index="1"}
![](images/storytelling/spotify2.png){fig-align="center"}
:::
:::

:::{.notes}
Would you agree to spend 10 minutes to share on social media about some data statistics a company made? No? Well, I‚Äôm pretty sure you did.
[click]
You probably remember Spotify wrapped. 
Can you remember how you felt after you saw your yearly data analysis? After all, it's just some stats, but it feels more than that. Personally, I always learn something about my musical taste, and it's weird to see that it has changed over the years. Anyway. It's engaging because it's told as a story. Not cold numbers.
:::

------------------------------------------------------------------------

##  {background-image="images/background_slides3.png" background-opacity="0.3"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
[Data Storytelling]{style="font-size: 1em"}

[Tool #1: Visualization]{style="font-size: 1.5em"}
:::

:::{.notes}
So, let me tell you about how visualization and storytelling are related.
:::



------------------------------------------------------------------------

## Examples {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="50%"}
![](images/dst_before.png){fig-align="center"} *üî¢ Don't share numbers*
:::

::: {.column .fragment width="50%"}
![](images/dst_after.png){fig-align="center"} *ü™∂ Share a story*
:::
:::

. . .

<br><br> [(C) Storytelling with Data, by Cole Nussbaumer Knaflic.]{style="font-size: 0.75em; color: gray"}


:::{.notes}
So, details are important. [click] But not all details are important.
On writing this is called the Chekhov's Gun: 
If in the first act you describe a pistol hung on the wall, then the pistol must be fired at some point. Otherwise don‚Äôt put it there. (Chekhov's Gun)
:::


------------------------------------------------------------------------

##  {background-image="images/background.jpg" background-opacity="0.25"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
::: callout-note
## Storytelling principle #2

Details matter, [but not **all** details are important.]{.fragment}
:::
:::

------------------------------------------------------------------------

## Best Charts for your Data {background-image="images/background.jpg" background-opacity="0.25"}

::: r-stack
<br>

![](images/storytelling/plot1.png){.fragment .fade-in-then-out fig-align="left"}

![](images/storytelling/plot2.png){.fragment fig-align="right"}
:::

. . .

[(C) Essential chart types for data visualization, por Atlassian.]{style="font-size: 0.75em; color: gray"}

::: notes
When we think about the best chart for our data, there are countless options.  
But honestly, most of the time you don‚Äôt need anything fancy.

If you master just a few ‚Äî like **bar plots**, **scatter plots**, **box plots**, **heatmaps**, and **well-placed text** ‚Äî  
you can already create impactful and clear visualizations.

These six types cover the vast majority of use cases.  
So when in doubt, start simple and focus on clarity.
:::

------------------------------------------------------------------------

##  {background-image="images/background_slides3.png" background-opacity="0.3"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
[Data Storytelling]{style="font-size: 1em"}

[Tool #2: AI]{style="font-size: 1.5em"}
:::


::: notes
Let‚Äôs talk about our second storytelling tool: **AI**.  
AI is not here to replace your story ‚Äî it's here to help you tell it better.

Whether you're generating ideas, testing visuals, or refining your message,  
AI can help you explore new possibilities and get to the point faster.

We'll see how it can support your data storytelling process in a creative and practical way.
:::



------------------------------------------------------------------------

## Examples {background-image="images/background.jpg" background-opacity="0.25"}

<br>

::: columns
::: {.column width="50%"}
![](images/gh_before.png){fig-align="center"}
:::

::: {.column .fragment width="50%"}
![](images/gh_after.png){fig-align="center"}
:::
:::

. . .

::: {style="text-align: center;"}
ü•± 1¬∞ version $<$ ... $<$ üòä last version
:::

------------------------------------------------------------------------

##  {background-image="images/background.jpg" background-opacity="0.25"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
::: callout-note
## Storytelling principle #3

Your first draft will [**always** be horrible.]{.fragment}
:::
:::


------------------------------------------------------------------------

##  From Ideas to Impact... Faster with AI {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%" .fragment}
<br>

- Faster structure, less effort  
- Clearer stories, better impact  
- Visuals in seconds  
- More time for creativity 
:::

::: {.column .fragment width="40%"}
![](images/ai/choice.jpeg){fig-align="center"}
:::
:::



------------------------------------------------------------------------

## üí°Unlocking Creativity with AI Tools {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%" .fragment}
<br>

-   [ChatGPT (OpenAI)](https://openai.com/chatgpt/)
-   [Gemini (Google DeepMind)](https://deepmind.google/gemini/)
-   [Napkin AI](https://www.napkin.one/)
-   [Midjourney](https://www.midjourney.com/)
-   [Bolt](https://bolt.new/)
:::

::: {.column width="40%"}
<img src="images/ai/ai_images.png" alt="Asistentes Virtuales" style="width: 100%; border-radius: 10px;"/>
:::
:::


------------------------------------------------------------------------

##  {background-image="images/background_slides3.png" background-opacity="0.3"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
[Data Storytelling]{style="font-size: 1em"}

[Tool #3: Presentation]{style="font-size: 1.5em"}
:::



------------------------------------------------------------------------

## Examples {background-image="images/background.jpg" background-opacity="0.25"}


::: panel-tabset
## Code

Let‚Äôs see how much code we need to say something as simple as:  
‚ÄúDo you like this presentation?‚Äù

It may seem like a small question, but turning that into code requires defining categories, assigning values, choosing colors, and setting plot parameters.  
And that‚Äôs just to get a basic bar chart.


``` r
categories <- c("Yes", "No")
values <- c(75, 25)
colors <- c("lightblue", "salmon")
barplot(
  values, names.arg = categories, col = colors, 
  main = "üòä Do you like the presentation so far? üòä", cex.main = 0.9
)
```

## Plot

```{r}
categories <- c("Yes", "No")
values <- c(75, 25)
colors <- c("lightblue", "salmon")
barplot(values, names.arg = categories, col = colors, main = "üòä Do you like the presentation so far? üòä", cex.main = 0.9)
```
:::

------------------------------------------------------------------------

##  {background-image="images/background.jpg" background-opacity="0.25"}

::: {style="display: flex; justify-content: center; align-items: center; height: 60vh; flex-direction: column; text-align: center;"}
::: callout-note
## Storytelling principle #4

[Explain less]{style="color: red"}, [show more.]{.fragment style="color: green"}
:::
:::

------------------------------------------------------------------------

## üìù Quarto (+ Extensions) {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%" .fragment}
<br><br>

[Quarto](https://quarto.org/) is an open system for scientific publications with markdown and interactive code (Python/R).

<br>

> üîß Need more power? Use [Extensions](https://quarto.org/docs/extensions/)


:::

::: {.column width="40%"}
![](images/quarto/quarto2.png)
:::
:::



------------------------------------------------------------------------

##  {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="40%"}
[C√≥digo: example.qmd]{style="font-size: 0.5em; color: gray"}

```         
---
title: "Habits"
author: "John Doe"
format:
  revealjs:
    transition: fade
    theme: black
    toc: true
    center: true
---

## Getting up

- Turn off alarm
- Get out of bed

---

## Going to sleep 
::: { .incremental }

- Get in bed
- Count sheep

:::
```
:::

::: {.column width="60%"}
[Slides: example.html]{style="font-size: 0.5em; color: gray"}

```{=html}
<iframe width=600 height=400 src="images/quarto/quarto_min.html"></iframe>
```
:::
:::


------------------------------------------------------------------------

## üåê Quarto WebR {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%"}
<br>

1.  [WebR](https://docs.r-wasm.org/webr/latest/): Run R code in the browser, no installation required.

    ``` bash
    # To install WebR in your environment
    remotes::install_github("attiyap/WebR")
    ```

2.  [Pyodide](https://quarto.thecoatlessprofessor.com/pyodide/): Same, but for Python.

    ``` bash
    # To install Pyodide
    pip install pyodide
    ```
:::

::: {.column width="40%"}
![](images/quarto/webr.png)
:::
:::

------------------------------------------------------------------------

## Example {background-image="images/background.jpg" background-opacity="0.25"}

```{webr-r}
categories <- c("Yes", "No")
values <- c(75, 25)
colors <- c("lightblue", "salmon")
par(mfrow = c(1, 1), mar = c(7, 4, 1, 1),  oma = c(1, 6, 1, 1)   )
barplot(values, names.arg = categories, col = colors, main = "üòä Do you like the presentation so far? üòä", cex.main = 0.9)
```

------------------------------------------------------------------------

## Shiny {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%"}
<br><br>

[Shiny](https://shiny.posit.co/) is an R package that allows you to easily create interactive web applications using R (also available for Python).
:::

::: {.column width="40%"}
![](images/quarto/shiny.png)
:::
:::

------------------------------------------------------------------------

## Shiny {background-image="images/background.jpg" background-opacity="0.25"}

<br>

![](https://shiny.posit.co/r/articles/improve/debugging/kmeans-showcase.gif){width="80%"}

------------------------------------------------------------------------

## üåê Quarto Shinylive {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="60%" .fragment}
<br>

* Deploy **Shiny** apps that run 100% in the browser ‚Äî with **Python** & **R** (via WebAssembly).
* No servers. No setup. Just code & run. 
:::

::: {.column width="40%"}
![](images/quarto/shinylive.png)
:::
:::

. . .

<br>

::: {style="text-align: center; font-size: 1.2em;"}
Stay in your presentation.  
Stay in the flow. üéØ
:::

------------------------------------------------------------------------

## Quarto & Shiny {background-image="images/background.jpg" background-opacity="0.25"}

```{shinylive-python}
#| standalone: true
#| viewerHeight: 550

from shiny import App, ui, render, reactive
import matplotlib.pyplot as plt
import io
import base64

# Function to generate the plot dynamically based on input values
def create_plot(yes_value, no_value):
    categories = ['Yes', 'No']
    values = [yes_value, no_value]

    fig, ax = plt.subplots(figsize=(10, 3))
    ax.bar(categories, values, color=['lightblue', 'salmon'])
    ax.set_title('üòä Do you like the presentation so far? üòä')

    # Convert the image to base64 for display in Shiny
    buf = io.BytesIO()
    plt.savefig(buf, format="png")
    plt.close(fig)
    buf.seek(0)
    encoded_image = base64.b64encode(buf.getvalue()).decode()
    return f'<img src="data:image/png;base64,{encoded_image}" style="max-width:100%;">'

# UI definition
app_ui = ui.page_fluid(
    ui.h2("Interactive Survey"),
    
    # Sliders to change values dynamically
    ui.input_slider("yes_value", "Yes responses:", min=0, max=50, value=20),
    ui.input_slider("no_value", "No responses:", min=0, max=50, value=10),
    
    # Output area for the plot
    ui.output_ui("plot_output")
)

# Server function
def server(input, output, session):
    @output
    @render.ui
    def plot_output():
        return ui.HTML(create_plot(input.yes_value(), input.no_value()))

# Create the Shiny app
app = App(app_ui, server)

```

------------------------------------------------------------------------

## üîó Useful Links {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column .incremental width="60%"}
<br>

-   üé• **YouTube Videos**:
    -   [Reproducible Data Science: WebR + Shinylive](https://www.youtube.com/watch?v=dummy_link)
    -   [George Stagg \| Posit](https://github.com/georgestagg)
-   üìñ **More about webR and Shinylive**:
    -   [WebR Documentation](https://docs.r-wasm.org/webr/v0.3.2/)
    -   [Shinylive Documentation](https://quarto-ext.github.io/shinylive/)
:::

::: {.column width="40%"}
<br> ![](images/quarto/rwasm.png)
:::
:::

------------------------------------------------------------------------

## Agenda (v2) {background-image="images/background.jpg" background-opacity="0.25"}

::: incremental
1.  Never reveal the [**ending**]{.fragment style="color:grey;"}\
2.  Details are important, but [not **all** details are important]{.fragment style="color:grey;"}\
3.  Your first draft will be [**horrible**]{.fragment style="color:grey;"}\
4.  Explain less, [**show more**]{.fragment style="color:grey;"}
:::

::: notes
Opci√≥n 2: Una agenda misteriosa.
:::

------------------------------------------------------------------------

## üéâ Thank You for Participating! {background-image="images/background.jpg" background-opacity="0.25"}

::: columns
::: {.column width="50%"}
<br>

‚ùì Questions?

üëè Fill out the [survey](https://forms.gle/roKy9m8pfSANAkHJ8)

ü•≥ Thank You Again!
:::

::: {.column width="50%" align="center"}
![](images/qr_shinyconf.png){width="400"}
:::
:::

> ‚ú® Shine On with Shiny! ([www.shinyconf.com](https://www.shinyconf.com/))

```{=html}
<style>
/* Ajusta el tama√±o del t√≠tulo y subt√≠tulo */
.reveal .slides h1 {
  font-size: 2em; /* Tama√±o m√°s peque√±o para el t√≠tulo */
}

.reveal .slides h2 {
  font-size: 1.5em; /* Tama√±o m√°s peque√±o para el subt√≠tulo */
}

/* Ajusta el tama√±o del texto en los p√°rrafos */
.reveal .slides p {
  font-size: 0.8em; /* Texto m√°s peque√±o */
}

/* Ajusta el tama√±o de las tablas */
.reveal .slides table {
  font-size: 0.8em; /* Tama√±o de fuente m√°s peque√±o en las tablas */
  width: 90%; /* Ajusta el ancho de la tabla */
  margin: 0 auto; /* Centra la tabla */
}

/* Ajusta el tama√±o de los bullets */
.reveal .slides ul {
  font-size: 0.8em; /* Tama√±o de fuente m√°s peque√±o en los bullets */

}

.reveal .slide-logo {
   max-height: 3em !important;
}


</style>
```